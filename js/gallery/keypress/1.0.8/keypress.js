define("gallery/keypress/1.0.8/keypress",[],function(a,b,c){var d;(function(){var a,b,c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1},ab={}.hasOwnProperty;T=[],W=[],X=null,I=[],c=[],P=!1,M="ctrl",O=["meta","alt","option","ctrl","shift","cmd"],Z=[],l={keys:[],count:0},r=function(a,b){var c;return a.filter?a.filter(b):function(){var d,e,f;for(f=[],d=0,e=a.length;e>d;d++)c=a[d],b(c)&&f.push(c);return f}()},K=function(){return console.log.apply(console,arguments)},m=function(a,b){var c,d,e;if(a.length!==b.length)return!1;for(d=0,e=a.length;e>d;d++)if(c=a[d],!(_.call(b,c)>=0))return!1;return!0},n=function(a,b){var c,d,e;if(a.length!==b.length)return!1;for(c=d=0,e=a.length;e>=0?e>d:d>e;c=e>=0?++d:--d)if(a[c]!==b[c])return!1;return!0},B=function(a,b){var c,d,e;for(d=0,e=a.length;e>d;d++)if(c=a[d],_.call(b,c)<0)return!1;return!0},C=function(a,b){var c,d,e,f,g;for(e=0,f=0,g=a.length;g>f;f++){if(d=a[f],c=b.indexOf(d),!(c>=e))return!1;e=c}return!0},Q=function(a,b){return(b||d.suppress_event_defaults)&&!d.force_event_defaults&&(a.preventDefault?a.preventDefault():a.returnValue=!1,a.stopPropagation)?a.stopPropagation():void 0},g=function(a){return a.prevent_repeat?!1:"function"==typeof a.on_keydown?!0:void 0},J=function(a){var b,c,d,e,f;for(f=a.keys,d=0,e=f.length;e>d;d++)if(b=f[d],_.call(I,b)>=0){c=!0;break}return c},s=function(a,b,c){return"function"==typeof b["on_"+a]&&Q(c,b["on_"+a].call(b["this"],c,b.count)===!1),"release"===a&&(b.count=0),"keyup"===a?b.keyup_fired=!0:void 0},L=function(a,b){var c,d,e;for(d=0,e=T.length;e>d;d++)c=T[d],(c.is_ordered&&n(a,c.keys)||!c.is_ordered&&m(a,c.keys))&&b(c)},t=function(a,b){var c,d,e;for(d=0,e=T.length;e>d;d++)c=T[d],(c.is_ordered&&C(c.keys,a)||!c.is_ordered&&B(c.keys,a))&&b(c)},k=function(a){return _.call(I,"cmd")>=0&&_.call(a,"cmd")<0?!1:!0},u=function(a){var b,c;return b=[],c=r(I,function(b){return b!==a}),c.push(a),L(c,function(a){return k(a.keys)?b.push(a):void 0}),t(c,function(a){return _.call(b,a)>=0?void 0:!a.is_solitary&&k(a.keys)?b.push(a):void 0}),b},w=function(a){var b,c,d,e;for(c=[],d=0,e=T.length;e>d;d++)b=T[d],b.is_sequence||_.call(b.keys,a)>=0&&k(b.keys)&&c.push(b);return c},f=function(a){var b,d,e,f,g,h,i,j,k,l,m,n,o,p,q;if(j=!1,i=!0,f=!1,_.call(c,a)>=0)return!0;if(c.length)for(h=k=0,p=c.length;p>=0?p>k:k>p;h=p>=0?++k:--k)if(b=c[h],b&&b.is_exclusive&&a.is_exclusive){if(e=b.keys,!j)for(l=0,n=e.length;n>l;l++)if(d=e[l],j=!0,_.call(a.keys,d)<0){j=!1;break}if(i&&!j)for(q=a.keys,m=0,o=q.length;o>m;m++)if(g=q[m],i=!1,_.call(e,g)<0){i=!0;break}j&&(f?V(c.splice(h,1)):(V(c.splice(h,1,a)),f=!0),i=!1)}return i&&c.unshift(a),j||i},U=function(a){var b,d,e,f;for(d=e=0,f=c.length;f>=0?f>e:e>f;d=f>=0?++e:--e)if(b=c[d],b===a){V(c.splice(d,1));break}},V=function(a){return a?(a.count=null,a.keyup_fired=null):void 0},e=function(a,b){var c,e,f,g;if(W.push(a),e=v(),e.length){for(f=0,g=e.length;g>f;f++)c=e[f],Q(b,c.prevent_default);X&&clearTimeout(X),d.sequence_delay>-1&&(X=setTimeout(function(){return W=[]},d.sequence_delay))}else W=[]},v=function(){var a,b,c,d,e,f,g,h,i,j,k,l;for(e=[],g=0,j=T.length;j>g;g++)for(a=T[g],c=h=1,k=W.length;k>=1?k>=h:h>=k;c=k>=1?++h:--h)if(f=W.slice(-c),a.is_sequence&&(!(_.call(a.keys,"shift")<0)||(f=r(f,function(a){return"shift"!==a}),f.length))){for(b=i=0,l=f.length;l>=0?l>i:i>l;b=l>=0?++i:--i){if(a.keys[b]!==f[b]){d=!1;break}d=!0}d&&e.push(a)}return e},x=function(a){var b,c,d,e,f,g,h,i,j,k,l,m;for(h=0,k=T.length;k>h;h++)if(b=T[h],b.is_sequence){for(d=i=1,l=W.length;l>=1?l>=i:i>=l;d=l>=1?++i:--i)if(g=r(W,function(a){return _.call(b.keys,"shift")>=0?!0:"shift"!==a}).slice(-d),b.keys.length===g.length)for(c=j=0,m=g.length;m>=0?m>j:j>m;c=m>=0?++j:--j)if(f=g[c],!((_.call(b.keys,"shift")<0?"shift"===f:0)||"shift"===a&&_.call(b.keys,"shift")<0)){if(b.keys[c]!==f){e=!1;break}e=!0}if(e)return b}return!1},p=function(a,b){var c;return b.shiftKey?(c=H[a],null!=c?c:!1):!1},y=function(a,b,c){var d;return _.call(a.keys,b)<0?!1:(Q(c,a&&a.prevent_default),_.call(I,b)>=0&&!g(a)?!1:(d=f(a,b),a.keyup_fired=!1,a.is_counting&&"function"==typeof a.on_keydown&&(a.count+=1),d?s("keydown",a,c):void 0))},D=function(a,b){var c,d,f,g,h,i,j,k,l,m,n,o,q,r,t;l=p(a,b),l&&(a=l),e(a,b),k=x(a),k&&s("keydown",k,b);for(h in N)f=N[h],b[f]&&(h===a||_.call(I,h)>=0||I.push(h));for(h in N)if(f=N[h],h!==a&&_.call(I,h)>=0&&!b[f])for(g=m=0,t=I.length;t>=0?t>m:m>t;g=t>=0?++m:--m)I[g]===h&&I.splice(g,1);for(d=u(a),n=0,q=d.length;q>n;n++)c=d[n],y(c,a,b);if(j=w(a),j.length)for(o=0,r=j.length;r>o;o++)i=j[o],Q(b,i.prevent_default);_.call(I,a)<0&&I.push(a)},z=function(a,b,c){var d,e;e=J(a),a.keyup_fired||(d=I.slice(),d.push(c),(!a.is_solitary||m(d,a.keys))&&(s("keyup",a,b),a.is_counting&&"function"==typeof a.on_keyup&&"function"!=typeof a.on_keydown&&(a.count+=1))),e||(s("release",a,b),U(a))},E=function(a,b){var d,e,f,g,h,i,j,k,l,m,n,o,q,r,t,u,v;if(k=a,j=p(a,b),j&&(a=j),j=H[k],b.shiftKey?j&&_.call(I,j)>=0||(a=k):k&&_.call(I,k)>=0||(a=j),i=x(a),i&&s("keyup",i,b),_.call(I,a)<0)return!1;for(h=l=0,u=I.length;u>=0?u>l:l>u;h=u>=0?++l:--l)if((v=I[h])===a||v===j||v===k){I.splice(h,1);break}for(e=c.length,g=[],m=0,q=c.length;q>m;m++)d=c[m],_.call(d.keys,a)>=0&&g.push(d);for(n=0,r=g.length;r>n;n++)f=g[n],z(f,b,a);if(e>1)for(o=0,t=c.length;t>o;o++)d=c[o],void 0===d||_.call(g,d)>=0||J(d)||U(d)},S=function(a,b){var c;if(P)return I.length&&(I=[]),void 0;if((b||I.length)&&(c=o(a.keyCode)))return b?D(c,a):E(c,a)},Y=function(a){var b,c,d,e;for(e=[],b=c=0,d=T.length;d>=0?d>c:c>d;b=d>=0?++c:--c){if(a===T[b]){T.splice(b,1);break}e.push(void 0)}return e},$=function(a){var b,c,d,e,f,g,h,i,j,k,l,m;for(a.keys.length||K("You're trying to bind a combo with no keys."),c=g=0,l=a.keys.length;l>=0?l>g:g>l;c=l>=0?++g:--g)d=a.keys[c],b=F[d],b&&(d=a.keys[c]=b),"meta"===d&&a.keys.splice(c,1,M),"cmd"===d&&K('Warning: use the "meta" key rather than "cmd" for Windows compatibility');for(m=a.keys,h=0,j=m.length;j>h;h++)if(d=m[h],_.call(Z,d)<0)return K('Do not recognize the key "'+d+'"'),!1;if(_.call(a.keys,"meta")>=0||_.call(a.keys,"cmd")>=0){for(f=a.keys.slice(),i=0,k=O.length;k>i;i++)e=O[i],(c=f.indexOf(e))>-1&&f.splice(c,1);if(f.length>1)return K("META and CMD key combos cannot have more than 1 non-modifier keys",a,f),!0}return!0},q=function(){-1!==navigator.userAgent.indexOf("Mac OS X")&&(M="cmd")},i=function(a){var b;return _.call(I,"cmd")>=0&&"cmd"!==(b=o(a.keyCode))&&"shift"!==b&&"alt"!==b&&"caps"!==b&&"tab"!==b?S(a,!1):void 0},j=function(){-1!==navigator.userAgent.indexOf("Opera")&&(G["17"]="cmd")},h=function(){var a;return a=function(a,b,c){return a.addEventListener?a.addEventListener(b,c):a.attachEvent?a.attachEvent("on"+b,c):void 0},a(document.body,"keydown",function(a){return a=a||window.event,S(a,!0),i(a)}),a(document.body,"keyup",function(a){return a=a||window.event,S(a,!1)}),a(window,"blur",function(){var a,b,c,d;for(b=0,c=I.length;c>b;b++)a=I[b],E(a,{});return I=[],d=[]})},A=function(){return q(),j()},d={},d.force_event_defaults=!1,d.suppress_event_defaults=!1,d.sequence_delay=800,d.get_registered_combos=function(){return T},d.reset=function(){T=[]},d.combo=function(a,b,c){return null==c&&(c=!1),d.register_combo({keys:a,on_keydown:b,prevent_default:c})},d.counting_combo=function(a,b,c){return null==c&&(c=!1),d.register_combo({keys:a,is_counting:!0,is_ordered:!0,on_keydown:b,prevent_default:c})},d.sequence_combo=function(a,b,c){return null==c&&(c=!1),d.register_combo({keys:a,on_keydown:b,is_sequence:!0,prevent_default:c})},d.register_combo=function(a){var b,c;"string"==typeof a.keys&&(a.keys=a.keys.split(" "));for(b in l)ab.call(l,b)&&(c=l[b],null==a[b]&&(a[b]=c));return $(a)?(T.push(a),!0):void 0},d.register_many=function(a){var b,c,e,f;for(f=[],c=0,e=a.length;e>c;c++)b=a[c],f.push(d.register_combo(b));return f},d.unregister_combo=function(a){var b,c,d,e;if(!a)return!1;if(a.keys)return Y(a);for(e=[],c=0,d=T.length;d>c;c++)b=T[c],b&&(m(keys,b.keys)?e.push(Y(b)):e.push(void 0));return e},d.unregister_many=function(a){var b,c,e,f;for(f=[],c=0,e=a.length;e>c;c++)b=a[c],f.push(d.unregister_combo(b));return f},d.listen=function(){return P=!1},d.stop_listening=function(){return P=!0},o=function(a){return G[a]},N={cmd:"metaKey",ctrl:"ctrlKey",shift:"shiftKey",alt:"altKey"},F={escape:"esc",control:"ctrl",command:"cmd","break":"pause",windows:"cmd",option:"alt",caps_lock:"caps",apostrophe:"'",semicolon:";",tilde:"~",accent:"`",scroll_lock:"scroll",num_lock:"num"},H={"/":"?",".":">",",":"<","'":'"',";":":","[":"{","]":"}","\\":"|","`":"~","=":"+","-":"_",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")"},G={0:"\\",8:"backspace",9:"tab",12:"num",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"caps",27:"escape",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",44:"print",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",91:"cmd",92:"cmd",93:"cmd",96:"num_0",97:"num_1",98:"num_2",99:"num_3",100:"num_4",101:"num_5",102:"num_6",103:"num_7",104:"num_8",105:"num_9",106:"num_multiply",107:"num_add",108:"num_enter",109:"num_subtract",110:"num_decimal",111:"num_divide",124:"print",144:"num",145:"scroll",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"`",224:"cmd",57392:"ctrl",63289:"num"};for(b in G)a=G[b],Z.push(a);for(b in H)a=H[b],Z.push(a);A(),R=function(a){return(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?a():setTimeout(function(){return R(a)},9)},R(h)}).call(this),c.exports=d});
