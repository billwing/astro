define("gallery/ztree/3.5.14/exhide",["$"],function(a){var b=a("$");!function(a){var b=function(a,b,c){"string"==typeof c.isHidden&&(c.isHidden=i.eqs(c.isHidden,"true")),c.isHidden=!!c.isHidden,l.initHideForExCheck(a,c)},c=function(){},d=function(a,b){b.showNodes=function(b,c){k.showNodes(a,b,c)},b.showNode=function(b,c){b&&k.showNodes(a,[b],c)},b.hideNodes=function(b,c){k.hideNodes(a,b,c)},b.hideNode=function(b,c){b&&k.hideNodes(a,[b],c)};var c=b.checkNode;c&&(b.checkNode=function(a){a&&a.isHidden||c.apply(b,arguments)})},e={initHideForExCheck:function(a,b){b.isHidden&&a.check&&a.check.enable&&("undefined"==typeof b._nocheck&&(b._nocheck=!!b.nocheck,b.nocheck=!0),b.check_Child_State=-1,k.repairParentChkClassWithSelf&&k.repairParentChkClassWithSelf(a,b))},initShowForExCheck:function(a,b){if(!b.isHidden&&a.check&&a.check.enable){if("undefined"!=typeof b._nocheck&&(b.nocheck=b._nocheck,delete b._nocheck),k.setChkClass){var c=m(b,j.id.CHECK,a);k.setChkClass(a,c,b)}k.repairParentChkClassWithSelf&&k.repairParentChkClassWithSelf(a,b)}}},f={clearOldFirstNode:function(a,b){for(var c=b.getNextNode();c;){if(c.isFirstNode){c.isFirstNode=!1,k.setNodeLineIcos(a,c);break}if(c.isLastNode)break;c=c.getNextNode()}},clearOldLastNode:function(a,b){for(var c=b.getPreNode();c;){if(c.isLastNode){c.isLastNode=!1,k.setNodeLineIcos(a,c);break}if(c.isFirstNode)break;c=c.getPreNode()}},makeDOMNodeMainBefore:function(a,b,c){a.push("<li ",c.isHidden?"style='display:none;' ":"","id='",c.tId,"' class='",j.className.LEVEL,c.level,"' tabindex='0' hidefocus='true' treenode>")},showNode:function(a,b){b.isHidden=!1,l.initShowForExCheck(a,b),m(b,a).show()},showNodes:function(a,b,c){if(b&&0!=b.length){var d,e,f={};for(d=0,e=b.length;e>d;d++){var g=b[d];if(!f[g.parentTId]){var h=g.getParentNode();f[g.parentTId]=null===h?l.getRoot(a):g.getParentNode()}k.showNode(a,g,c)}for(var i in f){var j=f[i][a.data.key.children];k.setFirstNodeForShow(a,j),k.setLastNodeForShow(a,j)}}},hideNode:function(a,b){b.isHidden=!0,b.isFirstNode=!1,b.isLastNode=!1,l.initHideForExCheck(a,b),k.cancelPreSelectedNode(a,b),m(b,a).hide()},hideNodes:function(a,b,c){if(b&&0!=b.length){var d,e,f={};for(d=0,e=b.length;e>d;d++){var g=b[d];if((g.isFirstNode||g.isLastNode)&&!f[g.parentTId]){var h=g.getParentNode();f[g.parentTId]=null===h?l.getRoot(a):g.getParentNode()}k.hideNode(a,g,c)}for(var i in f){var j=f[i][a.data.key.children];k.setFirstNodeForHide(a,j),k.setLastNodeForHide(a,j)}}},setFirstNode:function(a,b){var c=a.data.key.children,d=b[c].length;d>0&&!b[c][0].isHidden?b[c][0].isFirstNode=!0:d>0&&k.setFirstNodeForHide(a,b[c])},setLastNode:function(a,b){var c=a.data.key.children,d=b[c].length;d>0&&!b[c][0].isHidden?b[c][d-1].isLastNode=!0:d>0&&k.setLastNodeForHide(a,b[c])},setFirstNodeForHide:function(a,b){var c,d,e;for(d=0,e=b.length;e>d&&(c=b[d],!c.isFirstNode);d++){if(!c.isHidden&&!c.isFirstNode){c.isFirstNode=!0,k.setNodeLineIcos(a,c);break}c=null}return c},setFirstNodeForShow:function(a,b){var c,d,e,f,g;for(d=0,e=b.length;e>d;d++){if(c=b[d],!f&&!c.isHidden&&c.isFirstNode){f=c;break}if(f||c.isHidden||c.isFirstNode){if(f&&c.isFirstNode){c.isFirstNode=!1,g=c,k.setNodeLineIcos(a,c);break}c=null}else c.isFirstNode=!0,f=c,k.setNodeLineIcos(a,c)}return{"new":f,old:g}},setLastNodeForHide:function(a,b){var c,d;for(d=b.length-1;d>=0&&(c=b[d],!c.isLastNode);d--){if(!c.isHidden&&!c.isLastNode){c.isLastNode=!0,k.setNodeLineIcos(a,c);break}c=null}return c},setLastNodeForShow:function(a,b){var c,d,e,f;for(d=b.length-1;d>=0;d--){if(c=b[d],!e&&!c.isHidden&&c.isLastNode){e=c;break}if(e||c.isHidden||c.isLastNode){if(e&&c.isLastNode){c.isLastNode=!1,f=c,k.setNodeLineIcos(a,c);break}c=null}else c.isLastNode=!0,e=c,k.setNodeLineIcos(a,c)}return{"new":e,old:f}}},g={view:f,data:e};a.extend(!0,a.fn.zTree._z,g);var h=a.fn.zTree,i=h._z.tools,j=h.consts,k=h._z.view,l=h._z.data,m=(h._z.event,i.$);l.addInitNode(b),l.addBeforeA(c),l.addZTreeTools(d);var n=l.initNode;l.tmpHideParent=-1,l.initNode=function(a,b,c,d,e,f){if(l.tmpHideParent!==d){l.tmpHideParent=null==d?-1:d;var g=d?d:l.getRoot(a),h=g[a.data.key.children];l.tmpHideFirstNode=k.setFirstNodeForHide(a,h),l.tmpHideLastNode=k.setLastNodeForHide(a,h),k.setNodeLineIcos(a,l.tmpHideFirstNode),k.setNodeLineIcos(a,l.tmpHideLastNode)}e=l.tmpHideFirstNode===c,f=l.tmpHideLastNode===c,n&&n.apply(l,arguments),f&&k.clearOldLastNode(a,c)};var o=l.makeChkFlag;o&&(l.makeChkFlag=function(a,b){b&&b.isHidden||o.apply(l,arguments)});var p=l.getTreeCheckedNodes;p&&(l.getTreeCheckedNodes=function(a,b){if(b&&b.length>0){var c=b[0].getParentNode();if(c&&c.isHidden)return[]}return p.apply(l,arguments)});var q=l.getTreeChangeCheckedNodes;q&&(l.getTreeChangeCheckedNodes=function(a,b){if(b&&b.length>0){var c=b[0].getParentNode();if(c&&c.isHidden)return[]}return q.apply(l,arguments)});var r=k.expandCollapseSonNode;r&&(k.expandCollapseSonNode=function(a,b){b&&b.isHidden||r.apply(k,arguments)});var s=k.setSonNodeCheckBox;s&&(k.setSonNodeCheckBox=function(a,b){b&&b.isHidden||s.apply(k,arguments)});var t=k.repairParentChkClassWithSelf;t&&(k.repairParentChkClassWithSelf=function(a,b){b&&b.isHidden||t.apply(k,arguments)})}(b)});
