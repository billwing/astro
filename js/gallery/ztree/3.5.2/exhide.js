define("gallery/ztree/3.5.2/exhide",["$"],function(a){var d=a("$");(function(a){var b=function(a,b,c){"string"==typeof c.isHidden&&(c.isHidden=i.eqs(c.isHidden,"true")),c.isHidden=!!c.isHidden,l.initHideForExCheck(a,c)},c=function(){},d=function(a,b){b.showNodes=function(b,c){k.showNodes(a,b,c)},b.showNode=function(b,c){b&&k.showNodes(a,[b],c)},b.hideNodes=function(b,c){k.hideNodes(a,b,c)},b.hideNode=function(b,c){b&&k.hideNodes(a,[b],c)};var c=b.checkNode;c&&(b.checkNode=function(a){a&&a.isHidden||c.apply(b,arguments)})},e={initHideForExCheck:function(a,b){b.isHidden&&a.check&&a.check.enable&&(b._nocheck=!!b.nocheck,b.nocheck=!0,b.check_Child_State=-1,k.repairParentChkClassWithSelf&&k.repairParentChkClassWithSelf(a,b))},initShowForExCheck:function(b,c){if(!c.isHidden&&b.check&&b.check.enable){if(c.nocheck=c._nocheck,delete c._nocheck,k.setChkClass){var d=a("#"+c.tId+j.id.CHECK);k.setChkClass(b,d,c)}k.repairParentChkClassWithSelf&&k.repairParentChkClassWithSelf(b,c)}}},f={clearOldFirstNode:function(a,b){for(var c=b.getNextNode();c;){if(c.isFirstNode){c.isFirstNode=!1,k.setNodeLineIcos(a,c);break}if(c.isLastNode)break;c=c.getNextNode()}},clearOldLastNode:function(a,b){for(var c=b.getPreNode();c;){if(c.isLastNode){c.isLastNode=!1,k.setNodeLineIcos(a,c);break}if(c.isFirstNode)break;c=c.getPreNode()}},makeDOMNodeMainBefore:function(a,b,c){a.push("<li ",c.isHidden?"style='display:none;' ":"","id='",c.tId,"' class='level",c.level,"' tabindex='0' hidefocus='true' treenode>")},showNode:function(b,c){c.isHidden=!1,l.initShowForExCheck(b,c),a("#"+c.tId).show()},showNodes:function(a,b,c){if(b&&0!=b.length){var e,f,d={};for(e=0,f=b.length;f>e;e++){var g=b[e];if(!d[g.parentTId]){var h=g.getParentNode();d[g.parentTId]=null===h?l.getRoot(a):g.getParentNode()}k.showNode(a,g,c)}for(var i in d){var j=d[i][a.data.key.children];k.setFirstNodeForShow(a,j),k.setLastNodeForShow(a,j)}}},hideNode:function(b,c){c.isHidden=!0,c.isFirstNode=!1,c.isLastNode=!1,l.initHideForExCheck(b,c),k.cancelPreSelectedNode(b,c),a("#"+c.tId).hide()},hideNodes:function(a,b,c){if(b&&0!=b.length){var e,f,d={};for(e=0,f=b.length;f>e;e++){var g=b[e];if((g.isFirstNode||g.isLastNode)&&!d[g.parentTId]){var h=g.getParentNode();d[g.parentTId]=null===h?l.getRoot(a):g.getParentNode()}k.hideNode(a,g,c)}for(var i in d){var j=d[i][a.data.key.children];k.setFirstNodeForHide(a,j),k.setLastNodeForHide(a,j)}}},setFirstNode:function(a,b){var c=a.data.key.children,d=b[c].length;d>0&&!b[c][0].isHidden?b[c][0].isFirstNode=!0:d>0&&k.setFirstNodeForHide(a,b[c])},setLastNode:function(a,b){var c=a.data.key.children,d=b[c].length;d>0&&!b[c][0].isHidden?b[c][d-1].isLastNode=!0:d>0&&k.setLastNodeForHide(a,b[c])},setFirstNodeForHide:function(a,b){var c,d,e;for(d=0,e=b.length;e>d&&(c=b[d],!c.isFirstNode);d++){if(!c.isHidden&&!c.isFirstNode){c.isFirstNode=!0,k.setNodeLineIcos(a,c);break}c=null}return c},setFirstNodeForShow:function(a,b){var c,d,e,f,g;for(d=0,e=b.length;e>d;d++){if(c=b[d],!f&&!c.isHidden&&c.isFirstNode){f=c;break}if(f||c.isHidden||c.isFirstNode){if(f&&c.isFirstNode){c.isFirstNode=!1,g=c,k.setNodeLineIcos(a,c);break}c=null}else c.isFirstNode=!0,f=c,k.setNodeLineIcos(a,c)}return{"new":f,old:g}},setLastNodeForHide:function(a,b){var c,d;for(d=b.length-1;d>=0&&(c=b[d],!c.isLastNode);d--){if(!c.isHidden&&!c.isLastNode){c.isLastNode=!0,k.setNodeLineIcos(a,c);break}c=null}return c},setLastNodeForShow:function(a,b){var c,d,f,g;for(d=b.length-1;d>=0;d--){if(c=b[d],!f&&!c.isHidden&&c.isLastNode){f=c;break}if(f||c.isHidden||c.isLastNode){if(f&&c.isLastNode){c.isLastNode=!1,g=c,k.setNodeLineIcos(a,c);break}c=null}else c.isLastNode=!0,f=c,k.setNodeLineIcos(a,c)}return{"new":f,old:g}}},g={view:f,data:e};a.extend(!0,a.fn.zTree._z,g);var h=a.fn.zTree,i=h._z.tools,j=h.consts,k=h._z.view,l=h._z.data;h._z.event,l.addInitNode(b),l.addBeforeA(c),l.addZTreeTools(d);var n=l.initNode;l.tmpHideParent=-1,l.initNode=function(a,b,c,d,e,f){if(l.tmpHideParent!==d){l.tmpHideParent=d;var h=d?d:l.getRoot(a),i=h[a.data.key.children];l.tmpHideFirstNode=k.setFirstNodeForHide(a,i),l.tmpHideLastNode=k.setLastNodeForHide(a,i),k.setNodeLineIcos(a,l.tmpHideFirstNode),k.setNodeLineIcos(a,l.tmpHideLastNode)}e=l.tmpHideFirstNode===c,f=l.tmpHideLastNode===c,n&&n.apply(l,arguments),f&&k.clearOldLastNode(a,c)};var o=l.makeChkFlag;o&&(l.makeChkFlag=function(a,b){b&&b.isHidden||o.apply(l,arguments)});var p=l.getTreeCheckedNodes;p&&(l.getTreeCheckedNodes=function(a,b){if(b&&b.length>0){var e=b[0].getParentNode();if(e&&e.isHidden)return[]}return p.apply(l,arguments)});var q=l.getTreeChangeCheckedNodes;q&&(l.getTreeChangeCheckedNodes=function(a,b){if(b&&b.length>0){var d=b[0].getParentNode();if(d&&d.isHidden)return[]}return q.apply(l,arguments)});var r=k.expandCollapseSonNode;r&&(k.expandCollapseSonNode=function(a,b){b&&b.isHidden||r.apply(k,arguments)});var s=k.setSonNodeCheckBox;s&&(k.setSonNodeCheckBox=function(a,b){b&&b.isHidden||s.apply(k,arguments)});var t=k.repairParentChkClassWithSelf;t&&(k.repairParentChkClassWithSelf=function(a,b){b&&b.isHidden||t.apply(k,arguments)})})(d)});